{"ast":null,"code":"import API from \"../../API\";\nimport { addRecomendedCartAction, fetchRecomendedCartItemsAction, increaseRecomendedCartAction, decreaseRecomendedCartAction } from \"./actions\"; // import { push } from \"connected-react-router\";\n\nconst api = new API(); // const CARTS_KEY = \"CARTS_KEY\";\n\nexport const fetchRecomendedCarts = () => {\n  return async dispatch => {\n    return api.getRecomendedCarts().then(recomendedcarts => {\n      const subtotal = calculateSubtotal(recomendedcarts);\n      dispatch(fetchRecomendedCartItemsAction(recomendedcarts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API: /recomendedcarts/\");\n    });\n  };\n};\nexport const addRecomendedCart = recomendeditem => {\n  return async (dispatch, getState) => {\n    return api.addRecomendedCarts(recomendeditem.id).then(addedRecomendedCart => {\n      let prevRecomendedCarts = getState().recomendedcarts.list;\n      addedRecomendedCart[\"recomendeditem\"] = recomendeditem;\n      prevRecomendedCarts.push(addedRecomendedCart);\n      const subtotal = calculateSubtotal(prevRecomendedCarts);\n      dispatch(addRecomendedCartAction(prevRecomendedCarts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API to add recomendedcart\");\n      console.log(error);\n    });\n  };\n};\nexport const increaseRecomendedCart = recomendedcart_id => {\n  return async (dispatch, getState) => {\n    let prevRecomendedCarts = getState().recomendedcarts.list;\n    let matchedRecomendedCarts = prevRecomendedCarts.filter(recomendedcart => recomendedcart.id === recomendedcart_id);\n    let nextSelectedCount = matchedRecomendedCarts[0].quantity + 1;\n    return api.updateRecomendedCarts(recomendedcart_id, nextSelectedCount).then(updatedRecomendedCart => {\n      prevRecomendedCarts = prevRecomendedCarts.filter(recomendedcart => recomendedcart.id !== recomendedcart_id);\n      prevRecomendedCarts.push(updatedRecomendedCart);\n      const subtotal = calculateSubtotal(prevRecomendedCarts);\n      dispatch(increaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n    }).catch(error => {\n      alert(\"Failed to connect API to increase cart's quantity\");\n      console.log(error);\n    });\n  };\n};\nexport const decreaseRecomendedCart = recomendedcart_id => {\n  return async (dispatch, getState) => {\n    let prevRecomendedCarts = getState().recomendedcarts.list;\n    let matchedRecomendedCarts = prevRecomendedCarts.filter(recomendedcart => recomendedcart.id === recomendedcart_id);\n    let nextSelectedCount = matchedRecomendedCarts[0].quantity - 1;\n\n    if (nextSelectedCount > 0) {\n      // if quantity is more than 0, update\n      return api.updateRecomendedCarts(recomendedcart_id, nextSelectedCount).then(updatedRecomendedCart => {\n        prevRecomendedCarts = prevRecomendedCarts.filter(recomendedcart => recomendedcart.id !== recomendedcart_id);\n        prevRecomendedCarts.push(updatedRecomendedCart);\n        const subtotal = calculateSubtotal(prevRecomendedCarts);\n        dispatch(decreaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n      }).catch(error => {\n        alert(\"Failed to connect API to decrease cart's quantity\");\n        console.log(error);\n      });\n    } else {\n      // if quantity is 0, delete\n      return api.deleteRecomendedCarts(recomendedcart_id).then(deletedRecomendedCarts => {\n        prevRecomendedCarts = prevRecomendedCarts.filter(recomendedcart => recomendedcart.id !== recomendedcart_id);\n        const subtotal = calculateSubtotal(prevRecomendedCarts);\n        dispatch(decreaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n      }).catch(error => {\n        alert(\"Failed to connect API to decrease cart's quantity\");\n        console.log(error);\n      });\n    }\n  };\n};\n\nconst calculateSubtotal = recomendedcarts => {\n  let subtotal = 0;\n\n  for (let key in recomendedcarts) {\n    subtotal += Number(recomendedcarts[key].recomendeditem.price) * recomendedcarts[key].quantity;\n  }\n\n  return subtotal;\n};","map":{"version":3,"sources":["/Users/techi.s./Desktop/Cool-Tees5 2/frontend/src/reducks/recomendedcarts/operations.js"],"names":["API","addRecomendedCartAction","fetchRecomendedCartItemsAction","increaseRecomendedCartAction","decreaseRecomendedCartAction","api","fetchRecomendedCarts","dispatch","getRecomendedCarts","then","recomendedcarts","subtotal","calculateSubtotal","catch","error","alert","addRecomendedCart","recomendeditem","getState","addRecomendedCarts","id","addedRecomendedCart","prevRecomendedCarts","list","push","console","log","increaseRecomendedCart","recomendedcart_id","matchedRecomendedCarts","filter","recomendedcart","nextSelectedCount","quantity","updateRecomendedCarts","updatedRecomendedCart","decreaseRecomendedCart","deleteRecomendedCarts","deletedRecomendedCarts","key","Number","price"],"mappings":"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","sourcesContent":["import API from \"../../API\";\nimport {\n  addRecomendedCartAction,\n  fetchRecomendedCartItemsAction,\n  increaseRecomendedCartAction,\n  decreaseRecomendedCartAction,\n} from \"./actions\";\n// import { push } from \"connected-react-router\";\n\nconst api = new API();\n// const CARTS_KEY = \"CARTS_KEY\";\n\nexport const fetchRecomendedCarts = () => {\n  return async (dispatch) => {\n    return api\n      .getRecomendedCarts()\n      .then((recomendedcarts) => {\n        const subtotal = calculateSubtotal(recomendedcarts);\n        dispatch(fetchRecomendedCartItemsAction(recomendedcarts, subtotal));\n      })\n      .catch((error) => {\n        alert(\"Failed to connect API: /recomendedcarts/\");\n      });\n  };\n};\n\nexport const addRecomendedCart = (recomendeditem) => {\n  return async (dispatch, getState) => {\n    return api\n      .addRecomendedCarts(recomendeditem.id)\n      .then((addedRecomendedCart) => {\n        let prevRecomendedCarts = getState().recomendedcarts.list;\n        addedRecomendedCart[\"recomendeditem\"] = recomendeditem;\n        prevRecomendedCarts.push(addedRecomendedCart);\n        const subtotal = calculateSubtotal(prevRecomendedCarts);\n        dispatch(addRecomendedCartAction(prevRecomendedCarts, subtotal));\n      })\n      .catch((error) => {\n        alert(\"Failed to connect API to add recomendedcart\");\n        console.log(error);\n      });\n  };\n};\n\nexport const increaseRecomendedCart = (recomendedcart_id) => {\n  return async (dispatch, getState) => {\n    let prevRecomendedCarts = getState().recomendedcarts.list;\n    let matchedRecomendedCarts = prevRecomendedCarts.filter(\n      (recomendedcart) => recomendedcart.id === recomendedcart_id\n    );\n    let nextSelectedCount = matchedRecomendedCarts[0].quantity + 1;\n    return api\n      .updateRecomendedCarts(recomendedcart_id, nextSelectedCount)\n      .then((updatedRecomendedCart) => {\n        prevRecomendedCarts = prevRecomendedCarts.filter(\n          (recomendedcart) => recomendedcart.id !== recomendedcart_id\n        );\n        prevRecomendedCarts.push(updatedRecomendedCart);\n        const subtotal = calculateSubtotal(prevRecomendedCarts);\n        dispatch(increaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n      })\n      .catch((error) => {\n        alert(\"Failed to connect API to increase cart's quantity\");\n        console.log(error);\n      });\n  };\n};\n\nexport const decreaseRecomendedCart = (recomendedcart_id) => {\n  return async (dispatch, getState) => {\n    let prevRecomendedCarts = getState().recomendedcarts.list;\n    let matchedRecomendedCarts = prevRecomendedCarts.filter(\n      (recomendedcart) => recomendedcart.id === recomendedcart_id\n    );\n    let nextSelectedCount = matchedRecomendedCarts[0].quantity - 1;\n    if (nextSelectedCount > 0) {\n      // if quantity is more than 0, update\n      return api\n        .updateRecomendedCarts(recomendedcart_id, nextSelectedCount)\n        .then((updatedRecomendedCart) => {\n          prevRecomendedCarts = prevRecomendedCarts.filter(\n            (recomendedcart) => recomendedcart.id !== recomendedcart_id\n          );\n          prevRecomendedCarts.push(updatedRecomendedCart);\n          const subtotal = calculateSubtotal(prevRecomendedCarts);\n          dispatch(decreaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n        })\n        .catch((error) => {\n          alert(\"Failed to connect API to decrease cart's quantity\");\n          console.log(error);\n        });\n    } else {\n      // if quantity is 0, delete\n      return api\n        .deleteRecomendedCarts(recomendedcart_id)\n        .then((deletedRecomendedCarts) => {\n          prevRecomendedCarts = prevRecomendedCarts.filter(\n            (recomendedcart) => recomendedcart.id !== recomendedcart_id\n          );\n          const subtotal = calculateSubtotal(prevRecomendedCarts);\n          dispatch(decreaseRecomendedCartAction(prevRecomendedCarts, subtotal));\n        })\n        .catch((error) => {\n          alert(\"Failed to connect API to decrease cart's quantity\");\n          console.log(error);\n        });\n    }\n  };\n};\n\nconst calculateSubtotal = (recomendedcarts) => {\n  let subtotal = 0;\n  for (let key in recomendedcarts) {\n    subtotal +=\n      Number(recomendedcarts[key].recomendeditem.price) *\n      recomendedcarts[key].quantity;\n  }\n  return subtotal;\n};\n"]},"metadata":{},"sourceType":"module"}